import axios from 'axios'

// let baseURL = localStorage.getItem('server') || ''
// let baseURL = 'https://api.creatus.pretonobran.co/'
let baseURL = 'http://192.168.1.168:3000'

// Certifique-se de que o baseURL contÃ©m um protocolo

const token =
  'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NTE2ODM4NDUsImlhdCI6MTc1MTYzMzQ0NSwibmFtZSI6IkNyZWF0dXMiLCJ1c2VybmFtZSI6ImNyZWF0dXMiLCJpZCI6IjJjMGM2NDE1LTc0NGItNDJkOC1iYWM2LWY3MmUyYzJlYzM0ZiIsInBlcm1pc3Npb25zIjpbeyJpZCI6IjAyMTdlYzc0LTM0ZmEtNDY1My1hMzM4LWQ5M2E0OTdjMWEwYyIsImFjdGlvbiI6ImNyZWF0ZSIsInN1YmplY3QiOiJjYXRlZ29yeSJ9LHsiaWQiOiIxMTE4NjdhNS0zNmE1LTQwZjctOWM2Yi0wODhkOTRkZDczNTEiLCJhY3Rpb24iOiJjcmVhdGUiLCJzdWJqZWN0IjoiaW5zcGVjdGlvbiJ9LHsiaWQiOiIxODg0YTg2Zi05YzFmLTRlNzMtOWFiNi0wYzA2NjAxZmUyYTMiLCJhY3Rpb24iOiJ1cGRhdGUiLCJzdWJqZWN0IjoicGVybWlzc2lvbiJ9LHsiaWQiOiIyMzkyNDg3Zi1mNzk0LTRmNjQtODg5NC1kZDM3YmJlNzRiZjgiLCJhY3Rpb24iOiJkZWxldGUiLCJzdWJqZWN0IjoiY2F0ZWdvcnkifSx7ImlkIjoiMjVlZWY5MzctYzkwMy00Y2M3LTkwMWUtOTgzMmJkNDBjMWIwIiwiYWN0aW9uIjoidXBkYXRlIiwic3ViamVjdCI6InVzZXIifSx7ImlkIjoiMmI0ZTZlZDUtNDZhMy00ODhiLTg4ODItYWU3OThiM2Y4OGEwIiwiYWN0aW9uIjoicmVhZCIsInN1YmplY3QiOiJwZXJtaXNzaW9uIn0seyJpZCI6IjQwMDc4YWQ5LWRmZGItNGVhMS1iMWUzLTg1M2JlZGU1NmY4MyIsImFjdGlvbiI6InJlYWQiLCJzdWJqZWN0Ijoicm9sZSJ9LHsiaWQiOiI0N2ZmN2Q1Yy1jZTRkLTRhNTktODA4ZC03ZDExNmFlNTFiZTkiLCJhY3Rpb24iOiJkZWxldGUiLCJzdWJqZWN0Ijoicm9sZSJ9LHsiaWQiOiI1NzBmMjA3ZS05MWU2LTQ2NmYtYjRhMy05ZmRiOWY2OGMyMGYiLCJhY3Rpb24iOiJ1cGRhdGUiLCJzdWJqZWN0IjoiY2F0ZWdvcnkifSx7ImlkIjoiNWVlYTE5MGEtYTc0Yy00M2NkLTg0OGEtOTRmOTFjMDcyMTllIiwiYWN0aW9uIjoiY3JlYXRlIiwic3ViamVjdCI6InJvbGUifSx7ImlkIjoiNjdhNDA0NzUtZDM2MC00YmI2LTliOTMtMzdjNTBiYWIyYjJjIiwiYWN0aW9uIjoiY3JlYXRlIiwic3ViamVjdCI6InBlcm1pc3Npb24ifSx7ImlkIjoiNmVkZTEzMTYtNDk4Ny00MGY2LWJlMjEtNGJjNzY1ZmIzZWFlIiwiYWN0aW9uIjoiZGVsZXRlIiwic3ViamVjdCI6InBlcm1pc3Npb24ifSx7ImlkIjoiOGEzNDFiY2ItNzQzMi00NTdmLTliYTUtODA1ODQ5OTYzMzA0IiwiYWN0aW9uIjoiY3JlYXRlIiwic3ViamVjdCI6InNwZWN0cnVtIn0seyJpZCI6Ijk2MjRiMzAwLTIwYzMtNGU2NS05MTExLTRhOTBiMzZjMmZhNyIsImFjdGlvbiI6ImRlbGV0ZSIsInN1YmplY3QiOiJ1c2VyIn0seyJpZCI6IjliMzViMDkzLWU5MWItNDlhOC1iMDE1LWZlYTVhMDFkYzE3NCIsImFjdGlvbiI6InJlYWQiLCJzdWJqZWN0IjoidXNlciJ9LHsiaWQiOiJiOGIxODk4MC01ZDdlLTQ2YzAtODc0MS1iYjc3YWUzNTU2MDMiLCJhY3Rpb24iOiJyZWFkIiwic3ViamVjdCI6Imluc3BlY3Rpb24ifSx7ImlkIjoiYjliMjQ3ZjgtNGVmNy00MWRlLWJkMzQtODE5NDE5MzMyNzM3IiwiYWN0aW9uIjoicmVhZCIsInN1YmplY3QiOiJjYXRlZ29yeSJ9LHsiaWQiOiJkMDE0ZjgwNS1lOGNmLTQ0NDAtYmE1ZC0zNmMxMDM2NDVlODQiLCJhY3Rpb24iOiJ1cGRhdGUiLCJzdWJqZWN0IjoiaW5zcGVjdGlvbiJ9LHsiaWQiOiJkOGE2NDI4YS0yYWJmLTQyZDgtODUyYS1kNjEzZjkxNTUzOTAiLCJhY3Rpb24iOiJ1cGRhdGUiLCJzdWJqZWN0Ijoicm9sZSJ9LHsiaWQiOiJkYWIxOTRlMi0wNWE2LTQ3ZTMtYjU3Ny1mOGYyZmY3YWVmYTgiLCJhY3Rpb24iOiJoaXN0b3J5Iiwic3ViamVjdCI6Imluc3BlY3Rpb24ifSx7ImlkIjoiZTc3OTZkNTktMDVkYi00MGM2LWJiNmQtOGM5MTA0ZGNiMzQwIiwiYWN0aW9uIjoiY3JlYXRlIiwic3ViamVjdCI6InVzZXIifSx7ImlkIjoiZjExN2E4MTYtNzhmYy00ZWE1LWJmYzAtZDcwYTIxMTY5ODcwIiwiYWN0aW9uIjoicmVhZCIsInN1YmplY3QiOiJzcGVjdHJ1bSJ9LHsiaWQiOiJmYjU1OWNhNC0wZGZmLTRjNDAtYTlhYi02NjU5Y2Y2MWRiOGYiLCJhY3Rpb24iOiJhbmFseXNlIiwic3ViamVjdCI6Imluc3BlY3Rpb24ifV0sInBlcnNvbmFsX2lkZW50aWZpY2F0aW9uIjoiMDE2ODcxNjMwNTciLCJzcGVjdHJ1bV9jb2RlIjpbIjAwMDAiXX0.uUufIY7tBagztaZ3sSssMry1PYOWhJ3n7f4igM_I0Rc'
if (baseURL && !baseURL.startsWith('http://') && !baseURL.startsWith('https://')) {
  baseURL = `http://${baseURL}`
  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`
}

export const api = axios.create({
  // http://localhost:3000
  baseURL: baseURL || ''
})

api.interceptors.request.use(
  (config) => {
    // const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)
